// Variables globales
let ingresos = [];
let gastos = [];

document.addEventListener("DOMContentLoaded", () => {
    actualizarResumen();
});

// Función para agregar un ingreso con manejo de errores
function agregarIngreso() {
    try {
        let fuente = document.getElementById("fuente").value.trim();
        let monto = parseFloat(document.getElementById("monto-ingreso").value);
        let fecha = document.getElementById("fecha-ingreso").value;

        console.log(`Fuente: ${fuente}, Monto: ${monto}, Fecha: ${fecha}`); // Depuración

        // Validaciones
        if (!fuente || isNaN(monto) || monto <= 0 || !fecha) {
            throw new Error("Por favor, ingresa datos válidos.");
        }

        ingresos.push({ fuente, monto, fecha });
        actualizarLista("lista-ingresos", ingresos, true);
        actualizarResumen();

        limpiarCampos(["fuente", "monto-ingreso", "fecha-ingreso"]);
    } catch (error) {
        console.error("Error en agregarIngreso:", error.message); // Depuración
        alert(error.message);
    }
}

// Función para agregar un gasto con manejo de errores
function agregarGasto() {
    try {
        let descripcion = document.getElementById("descripcion").value.trim();
        let monto = parseFloat(document.getElementById("monto").value);
        let categoria = document.getElementById("categoria").value;
        let fecha = document.getElementById("fecha-gasto").value;

        console.log(`Descripción: ${descripcion}, Monto: ${monto}, Fecha: ${fecha}`); // Depuración

        // Validaciones
        if (!descripcion || isNaN(monto) || monto <= 0 || !fecha) {
            throw new Error("Por favor, ingresa datos válidos.");
        }

        gastos.push({ descripcion, monto, categoria, fecha });
        actualizarLista("lista-gastos", gastos, false);
        actualizarResumen();

        limpiarCampos(["descripcion", "monto", "fecha-gasto"]);
    } catch (error) {
        console.error("Error en agregarGasto:", error.message); // Depuración
        alert(error.message);
    }
}
